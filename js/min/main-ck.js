!function(t){var i={vars:{},init:function(){this.frontPage.init(),this.flexslider.init(),this.aspectRatio(),this.modal.lightbox(),this.colorToggle(),this.lightbox.init(),this.lightbox.basket(),Modernizr.addTest("firefox",function(){return!!navigator.userAgent.match(/firefox/i)});var a=t("#overlaymenu"),e=t(".menu-button"),l=t("#weezy");e.on("click",function(t){t.preventDefault(),l.toggleClass("no-scroll"),a.toggleClass("visible")}),null==t.cookie("hasSeenAnimation")&&(t(".splash").addClass("visible"),t(".splash").delay(1e3).fadeOut(1e3),t.cookie("hasSeenAnimation","true")),t(window).resize(function(){i.aspectRatio()})},frontPage:{vars:{},init:function(){var a=i.vars.home=t("#home");return a.length?(this.vars.links=t(".category-links a"),this.vars.album=t(".album"),this.vars.item=t(".album-items .item"),void this.triggers()):!1},triggers:function(){t("html").hasClass("no-touch")?i.frontPage.vars.album.on("hover",function(){t(this).toggleClass("active")}):t(".album").addClass("active"),i.frontPage.vars.links.mouseover(function(){var i=t(this).parent().data("bg");t(this).closest(".album").find(".background").toggleClass("visible"),t(this).closest(".album").find(".background").css("background-image","url("+i+")")}).mouseout(function(){t(this).closest(".album").find(".background").toggleClass("visible")}),i.frontPage.vars.item.on("click",function(){var i=t(this).data("id");t(this).children("a").attr("href",function(t,a){return a+"#"+i})})}},hash:{query:function(){var a=t(".gallery li").filter("[data-id="+i.hash.get()+"]").index();return-1!==a?a:void 0},get:function(){return window.location.hash.substring(1)},set:function(){var i=t(".flex-active-slide").data("id");"#"!==i&&(window.location.hash=i)}},flexslider:{vars:{},init:function(){var a=i.vars.lightbox=t("#slider");if(!a.length)return!1;this.vars.content=t("#gallery-content"),this.vars.image=t(".gallery .column"),this.vars.toggle=t(".toggle-gallery"),this.triggers();var e=i.flexslider.vars.slider=t("#slider");e.flexslider({animation:"slide",animationSpeed:850,controlNav:!1,slideshow:!1,startAt:i.hash.query(),start:function(){i.galleryMetaData()},after:function(){i.hash.set(),i.galleryMetaData()}})},triggers:function(){i.flexslider.vars.image.on("click",function(a){a.preventDefault();var e=t(this),l=t(".gallery li").filter("[data-id="+e.data("id")+"]").index(),s=t("#slider"),o=s.data("flexslider"),r=o.vars.animationSpeed;o.vars.animationSpeed=0,o.flexAnimate(l),o.vars.animationSpeed=r,i.galleryMetaData(),i.flexslider.vars.content.toggleClass("hide"),t("#slider").toggleClass("visible")}),i.flexslider.vars.toggle.on("click",function(a){a.preventDefault(),i.flexslider.vars.content.toggleClass("hide"),t("#slider").toggleClass("visible"),t(".lightbox-actions").toggleClass("hide")})}},aspectRatio:function(){i.vars.imageRatio=t(".gallery .column img"),i.vars.image=t(".gallery .column"),i.vars.imageRatio.each(function(){var i=t(this),a=parseInt(i.attr("height")),e=parseInt(i.attr("width"));i.addClass(a>e?"portrait":"landscape")});var a=i.vars.image.width();i.vars.image.css({height:a+"px"})},galleryMetaData:function(){var i=t(".flex-active-slide img"),a=i.attr("alt"),e=t("span.count"),l=t("span.title"),s=t("#slider"),o=s.data("flexslider").currentSlide;e.html(o+1),l.html(a)},modal:{lightbox:function(){t(".lightbox-toggle").on("click",function(){t(".lightbox-form-wrapper").toggleClass("visible")})},message:function(a){var e=t(".modal"),l=t(".modal .message");"success"===a?(l.removeClass("fail"),l.addClass("success").html("Image successfully added to lightbox."),e.toggleClass("visible"),i.modal.timeout()):(l.removeClass("success"),l.addClass("fail").html("Image already exists in the lightbox."),e.toggleClass("visible"),i.modal.timeout())},timeout:function(){clearTimeout(a);var i=t(".modal"),a=setTimeout(function(){i.toggleClass("visible")},3e3)}},colorToggle:function(){t(".color-toggle").on("click",function(){t("#weezy").toggleClass("black")})},lightbox:{vars:{},init:function(){this.vars.array=[],this.setCookie(),this.triggers(),t(".lightbox-cart").append("<span class='counter'></span>");var a=t("#field_1_2 input").val();t("#field_1_2 input").val(a+"?id="+i.lightbox.vars.array)},setCookie:function(){if("undefined"==typeof t.cookie("lightbox"))t.cookie("lightbox","0",{expires:7});else{i.lightbox.vars.array=t.cookie("lightbox").split(",");for(var a=0;a<i.lightbox.vars.array.length;a++)i.lightbox.vars.array[a]=parseInt(i.lightbox.vars.array[a])}},triggers:function(){var a=t(".lightbox-add"),e=t(".lightbox-remove"),l=t(".lightbox-clear"),s=t(".slides li");a.on("click",function(a){a.preventDefault();var e=t(this).data("id");i.lightbox.addToArray(e)}),e.on("click",function(a){a.preventDefault();var e=t(this).data("id");i.lightbox.removeFromArray(e)}),l.on("click",function(t){t.preventDefault(),i.lightbox.clearArray()}),s.on("hover",function(){t(this).children(".lightbox-btn, .lightbox-remove").toggleClass("visible")})},addToArray:function(a){var e=i.lightbox.vars.array;if(-1==e.indexOf(a)){e.push(a);var l=e.toString();t.cookie("lightbox",l),i.modal.message("success"),i.lightbox.basket()}else i.modal.message("fail")},removeFromArray:function(a){var e=i.lightbox.vars.array,l=e.indexOf(a);if(-1!==l){e.splice(l,1);var s=e.toString();t.cookie("lightbox",s),location.reload()}i.lightbox.basket()},basket:function(){var a=i.lightbox.vars.array.length-1;a>0&&(t(".counter").html(a),t(".counter").addClass("bounce"))},clearArray:function(){t.removeCookie("lightbox"),location.reload()}}};i.init(),t(window).load(function(){t("img.lazy").lazyload({container:t(".gallery"),effect:"fadeIn"}),t("#single-albums")&&i.hash.query()&&(t("#gallery-content").toggleClass("hide"),t(".lightbox-actions").toggleClass("hide"),t("#slider").toggleClass("visible"))})}(jQuery);