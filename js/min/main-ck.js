!function($){var e={vars:{},init:function(){this.frontPage.init(),this.flexslider.init(),this.aspectRatio(),this.modal.lightbox(),this.colorToggle(),this.lightbox.init(),this.lightbox.basket(),Modernizr.addTest("firefox",function(){return!!navigator.userAgent.match(/firefox/i)});var t=$("#overlaymenu"),a=$(".menu-button"),i=$("#weezy");a.on("click",function(e){e.preventDefault(),i.toggleClass("no-scroll"),t.toggleClass("visible")});var l=new Blazy({selector:".lazy",container:".gallery, #gallery-content, .album-items"});$(window).resize(function(){e.aspectRatio()})},frontPage:{vars:{},init:function(){var t=e.vars.home=$("#home, #home2");return t.length?(this.vars.links=$(".category-links a"),this.vars.album=$(".album"),this.vars.item=$(".album-items .item"),void this.triggers()):!1},triggers:function(){$("html").hasClass("no-touch")?e.frontPage.vars.album.on("hover",function(){$(this).toggleClass("active")}):$(".album").addClass("active"),e.frontPage.vars.links.mouseover(function(){var e=$(this).parent().data("bg");$(this).closest(".album").find('.bg[data-bg="'+e+'"]').toggleClass("visible")}).mouseout(function(){var e=$(this).parent().data("bg");$(this).closest(".album").find('.bg[data-bg="'+e+'"]').toggleClass("visible")})}},hash:{query:function(){var t=$(".gallery li").filter("[data-id="+e.hash.get()+"]").index();return-1!==t?t:void 0},get:function(){return window.location.hash.substring(1)},set:function(){var e=$(".flex-active-slide").data("id");"#"!==e&&(window.location.hash=e)}},flexslider:{vars:{},init:function(){var t=e.vars.lightbox=$("#slider");if(!t.length)return!1;this.vars.content=$("#gallery-content"),this.vars.image=$(".gallery .column"),this.vars.toggle=$(".toggle-gallery"),this.triggers();var a=e.flexslider.vars.slider=$("#slider");a.flexslider({animation:"slide",animationSpeed:1e3,controlNav:!1,slideshow:!1,startAt:e.hash.query(),start:function(){$(window).trigger("resize"),e.galleryMetaData()},before:function(){$(".modal").removeClass("visible"),$(".desc-overlay").removeClass("visible")},after:function(){e.hash.set(),e.galleryMetaData()}})},triggers:function(){e.flexslider.vars.image.on("click",function(t){t.preventDefault();var a=$(this),i=$(".gallery li").filter("[data-id="+a.data("id")+"]").index(),l=$("#slider"),s=l.data("flexslider"),o=s.vars.animationSpeed;s.vars.animationSpeed=0,s.flexAnimate(i),s.vars.animationSpeed=o,e.galleryMetaData(),e.flexslider.vars.content.toggleClass("hide"),$(window).trigger("resize"),$("#slider").toggleClass("visible")}),e.flexslider.vars.toggle.on("click",function(t){t.preventDefault(),e.flexslider.vars.content.toggleClass("hide"),$("#slider").toggleClass("visible"),$(".lightbox-actions").toggleClass("hide")})}},aspectRatio:function(){e.vars.imageRatio=$(".gallery .column"),e.vars.image=$(".gallery .column"),e.vars.imageRatio.each(function(){var e=$(this).find("img"),t=parseInt(e.attr("height")),a=parseInt(e.attr("width"));$(this).addClass(t>a?"portrait":a>t?"landscape":"square")});var t=e.vars.image.outerWidth();e.vars.image.css({height:t+"px"})},galleryMetaData:function(){var e=$(".flex-active-slide img"),t=e.attr("alt"),a=$("span.count"),i=$("span.title"),l=$("#slider"),s=l.data("flexslider").currentSlide;a.html(s+1),i.html(t),activeID=$(".flex-active-slide").data("id"),$("button.add").attr("data-id",activeID),$("button.remove").attr("data-id",activeID)},modal:{lightbox:function(){$(".lightbox-toggle").on("click",function(){$(".lightbox-form-wrapper").toggleClass("visible")})},message:function(t){var a=$(".modal"),i=$(".modal .message");"success"===t?(i.removeClass("fail"),i.addClass("success").html("Image successfully added to lightbox."),a.addClass("visible"),e.modal.timeout()):(i.removeClass("success"),i.addClass("fail").html("Image already exists in the lightbox."),a.addClass("visible"),e.modal.timeout())},timeout:function(){clearTimeout(t);var e=$(".modal"),t=setTimeout(function(){e.removeClass("visible")},3e3)}},colorToggle:function(){var e=$("#weezy");$(".color-toggle").on("click",function(){e.hasClass("white")?e.removeClass("white").addClass("black"):e.removeClass("black").addClass("white")})},lightbox:{vars:{},init:function(){this.vars.array=[],this.setCookie(),this.triggers(),$(".lightbox-cart").append("<span class='counter'></span>");var t=$("#field_1_2 input").val();$("#field_1_2 input").val(t+"?id="+e.lightbox.vars.array)},setCookie:function(){"undefined"==typeof $.cookie("lightbox")?$.cookie("lightbox","0",{expires:7}):e.lightbox.vars.array=$.cookie("lightbox").split(",")},triggers:function(){var t=$(".lightbox-add"),a=$(".add"),i=$(".remove"),l=$(".lightbox-remove"),s=$(".lightbox-clear"),o=$(".info"),r=$(".slides li");t.on("click",function(t){t.preventDefault();var a=$(this).attr("data-id");e.lightbox.addToArray(a)}),a.on("click",function(t){t.preventDefault();var a=$(this).attr("data-id");e.lightbox.addToArray(a)}),l.on("click",function(t){t.preventDefault();var a=$(this).attr("data-id");e.lightbox.removeFromArray(a)}),i.on("click",function(t){t.preventDefault();var a=$(this).attr("data-id");e.lightbox.removeFromArray(a)}),s.on("click",function(t){t.preventDefault(),e.lightbox.clearArray()}),o.on("click",function(e){e.preventDefault(),$(this).toggleClass("active"),$(".desc-overlay").toggleClass("visible")}),$(".desc-overlay button").on("click",function(){$(".desc-overlay").toggleClass("visible")}),r.on("hover",function(){$(this).children(".lightbox-btn, .lightbox-remove").toggleClass("visible")})},addToArray:function(t){var a=e.lightbox.vars.array;-1==$.inArray(t,a)?(a.push(t),$.cookie("lightbox",a),e.modal.message("success"),e.lightbox.basket()):e.modal.message("fail")},removeFromArray:function(t){var a=e.lightbox.vars.array,i=$.inArray(t,a);-1!==i&&(a.splice(i,1),$.cookie("lightbox",a),location.reload()),e.lightbox.basket()},basket:function(){var t=e.lightbox.vars.array.length-1;t>0&&($(".counter").html(t),$(".counter").addClass("bounce"))},clearArray:function(){$.removeCookie("lightbox"),location.reload()}}};e.init(),$(window).load(function(){$(".equal-height").matchHeight(),$("#single-albums")&&e.hash.query()&&($("#gallery-content").toggleClass("hide"),$(".lightbox-actions").toggleClass("hide"),$("#slider").toggleClass("visible")),null==$.cookie("hasSeenAnimation")?($(".splash").addClass("visible"),setTimeout(function(){$(".splash").removeClass("visible"),$(".fadeIn").addClass("invisible")},2e3),$.cookie("hasSeenAnimation","true")):setTimeout(function(){$(".fadeIn").addClass("invisible")},1e3),$(".category-links .bg").each(function(){$("<img/>",{src:$(this).data("bg"),"class":"precachedImg",style:"display:none;"}).appendTo("body")}),$(".precachedImg").load(function(){$(this).remove()})})}(jQuery);