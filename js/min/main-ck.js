!function(a){var e={vars:{},init:function(){this.frontPageMenu.init(),this.overlayMenu.init(),this.lightbox.init(),this.lightbox.basket(),this.colorToggle(),this.centerImage(),this.aspectRatio(),a(window).resize(function(){e.aspectRatio(),e.centerImage()})},frontPageMenu:{vars:{},init:function(){this.vars.links=a(".category-links a"),this.vars.album=a(".album"),this.triggers()},triggers:function(){a("html").hasClass("no-touch")?e.frontPageMenu.vars.album.on("hover",function(){a(this).toggleClass("active")}):a(".album").addClass("active"),e.frontPageMenu.vars.links.mouseover(function(){var e=a(this).parent().data("bg");a(this).closest(".album").find(".background").toggleClass("visible"),a(this).closest(".album").find(".background").css("background-image","url("+e+")")}).mouseout(function(){a(this).closest(".album").find(".background").toggleClass("visible")})}},overlayMenu:{vars:{},init:function(){this.triggers();var t=e.overlayMenu.vars.slider=a(".flexslider");t.flexslider({animation:"fade",animationSpeed:850,controlNav:!1,slideshow:!1,startAt:e.overlayMenu.queryId(),after:function(){e.overlayMenu.setHash(),e.galleryMetaData()}}),a("body").hasClass("single-albums")&&e.overlayMenu.queryId()&&(a("#gallery-content").toggleClass("hide"),a(".lightbox-actions").toggleClass("hide"),a(".flexslider").toggleClass("visible"))},queryId:function(){var e=window.location.hash.substring(1),t=a(".gallery li").filter("[data-id="+e+"]").index();return-1!==t?t:void 0},setHash:function(){var e=a(".flex-active-slide").data("id");"#"!==e&&(window.location.hash=e)},triggers:function(){var t=a("#overlaymenu"),i=a(".menu-button"),l=a(".album-grid .item"),s=a("#gallery-content"),o=a(".gallery .column"),r=a(".toggle-gallery");i.on("click",function(a){a.preventDefault(),t.toggleClass("visible")}),o.on("click",function(t){t.preventDefault();var i=a(this),l=a(".gallery li").filter("[data-id="+i.data("id")+"]").index();a(".flexslider").flexslider(l),e.galleryMetaData(),s.toggleClass("hide"),a(".flexslider").toggleClass("visible"),a(".lightbox-actions").toggleClass("hide")}),l.on("click",function(){var e=a(this).data("id");a(this).parent().attr("href",function(a,t){return t+"#"+e})}),r.on("click",function(e){e.preventDefault(),s.toggleClass("hide"),a(".flexslider").toggleClass("visible"),a(".lightbox-actions").toggleClass("hide")})}},centerImage:function(){var e=a(".slides .image"),t=a(".slides img"),i=t.height()/2,l=t.width()/2,s=a(".slides li").width()/2,o=a(".slides li").height()/2,r=o-i,n=s-l;e.css({position:"absolute",top:r,left:n})},aspectRatio:function(){e.vars.imageRatio=a(".gallery .column img"),e.vars.image=a(".gallery .column"),e.vars.imageRatio.each(function(){var e=a(this),t=parseInt(e.attr("height")),i=parseInt(e.attr("width"));e.addClass(t>i?"portrait":"landscape")});var t=e.vars.image.width();e.vars.image.css({height:t+"px"})},galleryMetaData:function(){var e=a(".flexslider"),t=e.data("flexslider"),i=a(".flex-active-slide img"),l=i.attr("alt"),s=a("span.count"),o=a("span.title"),r=t.currentSlide+1;s.html(r),o.html(l)},modal:{vars:{},message:function(t){var i=a(".modal"),l=a(".modal .message");"success"===t?(l.removeClass("fail"),l.addClass("success").html("Image successfully added to lightbox."),i.toggleClass("visible"),e.modal.timeout()):(l.removeClass("success"),l.addClass("fail").html("Image already exists in the lightbox."),i.toggleClass("visible"),e.modal.timeout())},timeout:function(){setTimeout(function(){modal=a(".modal"),a(modal).toggleClass("visible")},3e3)}},colorToggle:function(){a(".color-toggle").on("click",function(){a("#main").toggleClass("black")})},lightbox:{vars:{},init:function(){this.vars.array=[],this.setCookie(),this.triggers();var t=a("#field_1_2 input").val();a("#field_1_2 input").val(t+"?id="+e.lightbox.vars.array)},setCookie:function(){if("undefined"==typeof a.cookie("lightbox"))a.cookie("lightbox","0",{expires:7});else{e.lightbox.vars.array=a.cookie("lightbox").split(",");for(var t=0;t<e.lightbox.vars.array.length;t++)e.lightbox.vars.array[t]=parseInt(e.lightbox.vars.array[t])}},triggers:function(){var t=a(".lightbox-btn"),i=a(".lightbox-remove"),l=a(".clear-selection");t.on("click",function(t){t.preventDefault();var i=a(this).data("id");e.lightbox.addToArray(i)}),i.on("click",function(t){t.preventDefault();var i=a(this).data("id");e.lightbox.removeFromArray(i)}),l.on("click",function(a){a.preventDefault(),e.lightbox.clearArray()})},addToArray:function(t){var i=e.lightbox.vars.array;if(-1==i.indexOf(t)){i.push(t);var l=i.toString();a.cookie("lightbox",l),e.modal.message("success"),e.lightbox.basket()}else e.modal.message("fail")},removeFromArray:function(t){var i=e.lightbox.vars.array,l=i.indexOf(t);if(-1!==l){i.splice(l,1);var s=i.toString();a.cookie("lightbox",s),location.reload()}e.lightbox.basket()},basket:function(){var t=e.lightbox.vars.array.length-1;t>0&&(a("span.counter").html(t),a("span.counter").addClass("bounce"))},clearArray:function(){a.removeCookie("lightbox"),location.reload()}}};e.init(),a(window).load(function(){var e=new Blazy({container:".gallery"});a(".splash").delay(1e3).fadeOut(1e3)})}(jQuery);