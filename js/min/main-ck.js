!function(t){var a={vars:{},init:function(){this.frontPageMenu.init(),this.overlayMenu.init(),this.aspectRatio(),this.galleryMetaData(),this.modal.lightbox(),this.colorToggle(),this.lightbox.init(),this.lightbox.basket(),Modernizr.addTest("firefox",function(){return!!navigator.userAgent.match(/firefox/i)}),t(window).resize(function(){a.aspectRatio()})},frontPageMenu:{vars:{},init:function(){this.vars.links=t(".category-links a"),this.vars.album=t(".album"),this.triggers()},triggers:function(){t("html").hasClass("no-touch")?a.frontPageMenu.vars.album.on("hover",function(){t(this).toggleClass("active")}):t(".album").addClass("active"),a.frontPageMenu.vars.links.mouseover(function(){var a=t(this).parent().data("bg");t(this).closest(".album").find(".background").toggleClass("visible"),t(this).closest(".album").find(".background").css("background-image","url("+a+")")}).mouseout(function(){t(this).closest(".album").find(".background").toggleClass("visible")})}},overlayMenu:{vars:{},init:function(){this.triggers();var i=a.overlayMenu.vars.slider=t(".flexslider");i.flexslider({animation:"fade",animationSpeed:850,controlNav:!1,slideshow:!1,startAt:a.overlayMenu.queryId(),after:function(){a.overlayMenu.setHash(),a.galleryMetaData()}})},queryId:function(){var a=window.location.hash.substring(1),i=t(".gallery li").filter("[data-id="+a+"]").index();return-1!==i?i:void 0},setHash:function(){var a=t(".flex-active-slide").data("id");"#"!==a&&(window.location.hash=a)},triggers:function(){var i=t("#overlaymenu"),e=t(".menu-button"),l=t(".album-items .item"),o=t(".gallery-content"),s=t(".gallery .column"),r=t(".toggle-gallery");e.on("click",function(t){t.preventDefault(),i.toggleClass("visible")}),s.on("click",function(i){i.preventDefault();var e=t(this),l=t(".gallery li").filter("[data-id="+e.data("id")+"]").index();t(".flexslider").flexslider(l),a.galleryMetaData(),o.toggleClass("hide"),t(".flexslider").toggleClass("visible")}),l.on("click",function(){var a=t(this).data("id");t(this).children("a").attr("href",function(t,i){return i+"#"+a})}),r.on("click",function(a){a.preventDefault(),o.toggleClass("hide"),t(".flexslider").toggleClass("visible"),t(".lightbox-actions").toggleClass("hide")})}},aspectRatio:function(){a.vars.imageRatio=t(".gallery .column img"),a.vars.image=t(".gallery .column"),a.vars.imageRatio.each(function(){var a=t(this),i=parseInt(a.attr("height")),e=parseInt(a.attr("width"));a.addClass(i>e?"portrait":"landscape")});var i=a.vars.image.width();a.vars.image.css({height:i+"px"})},galleryMetaData:function(){var i=t(".flex-active-slide img"),e=i.attr("alt"),l=t("span.count"),o=t("span.title"),s=a.overlayMenu.vars.slider.data("flexslider").currentSlide;l.html(s+1),o.html(e)},modal:{lightbox:function(){t(".lightbox-toggle").on("click",function(){t(".lightbox-form-wrapper").toggleClass("visible")})},message:function(i){var e=t(".modal"),l=t(".modal .message");"success"===i?(l.removeClass("fail"),l.addClass("success").html("Image successfully added to lightbox."),e.toggleClass("visible"),a.modal.timeout()):(l.removeClass("success"),l.addClass("fail").html("Image already exists in the lightbox."),e.toggleClass("visible"),a.modal.timeout())},timeout:function(){clearTimeout(i);var a=t(".modal"),i=setTimeout(function(){a.toggleClass("visible")},3e3)}},colorToggle:function(){t(".color-toggle").on("click",function(){t("#main").toggleClass("black")})},lightbox:{vars:{},init:function(){this.vars.array=[],this.setCookie(),this.triggers();var i=t("#field_1_2 input").val();t("#field_1_2 input").val(i+"?id="+a.lightbox.vars.array)},setCookie:function(){if("undefined"==typeof t.cookie("lightbox"))t.cookie("lightbox","0",{expires:7});else{a.lightbox.vars.array=t.cookie("lightbox").split(",");for(var i=0;i<a.lightbox.vars.array.length;i++)a.lightbox.vars.array[i]=parseInt(a.lightbox.vars.array[i])}},triggers:function(){var i=t(".lightbox-add"),e=t(".lightbox-remove"),l=t(".lightbox-clear"),o=t(".slides li");i.on("click",function(i){i.preventDefault();var e=t(this).data("id");a.lightbox.addToArray(e)}),e.on("click",function(i){i.preventDefault();var e=t(this).data("id");a.lightbox.removeFromArray(e)}),l.on("click",function(t){t.preventDefault(),a.lightbox.clearArray()}),o.on("hover",function(){t(this).children(".lightbox-btn, .lightbox-remove").toggleClass("visible")})},addToArray:function(i){var e=a.lightbox.vars.array;if(-1==e.indexOf(i)){e.push(i);var l=e.toString();t.cookie("lightbox",l),a.modal.message("success"),a.lightbox.basket()}else a.modal.message("fail")},removeFromArray:function(i){var e=a.lightbox.vars.array,l=e.indexOf(i);if(-1!==l){e.splice(l,1);var o=e.toString();t.cookie("lightbox",o),location.reload()}a.lightbox.basket()},basket:function(){var i=a.lightbox.vars.array.length-1;i>0&&(t(".counter").html(i),t(".counter").addClass("bounce"))},clearArray:function(){t.removeCookie("lightbox"),location.reload()}}};a.init(),t(window).load(function(){var i=new Blazy({container:".gallery"});t("body").hasClass("single-albums")&&a.overlayMenu.queryId()&&(t(".gallery-content").toggleClass("hide"),t(".lightbox-actions").toggleClass("hide"),t(".flexslider").toggleClass("visible")),t(".splash").delay(1e3).fadeOut(1e3)})}(jQuery);