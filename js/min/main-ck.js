!function(t){var i={vars:{},init:function(){i.vars.html=t("html"),i.vars.imageRatio=t(".gallery .column img, .slides img"),i.vars.image=t(".gallery .column"),this.frontPageMenu.init(),this.overlayMenu.init(),this.aspectRatio(),this.lightbox.init(),this.lightbox.basket(),this.colorToggle(),this.modal.position(),t(window).resize(function(){i.aspectRatio()})},frontPageMenu:{vars:{},init:function(){this.vars.links=t(".category-links a"),this.vars.album=t(".album"),this.triggers()},triggers:function(){t("html").hasClass("no-touch")?i.frontPageMenu.vars.album.on("hover",function(){t(this).toggleClass("active")}):t(".album").addClass("active"),i.frontPageMenu.vars.links.mouseover(function(){var i=t(this).parent().data("bg");t(this).closest(".album").find(".background").toggleClass("visible"),t(this).closest(".album").find(".background").css("background-image","url("+i+")")}).mouseout(function(){t(this).closest(".album").find(".background").toggleClass("visible")})}},overlayMenu:{init:function(){this.triggers()},triggers:function(){var a=t("#overlaymenu"),e=t(".menu-button"),l=t("#gallery-content"),o=t(".gallery .column"),s=t(".toggle-gallery");e.on("click",function(t){t.preventDefault(),a.toggleClass("visible")}),o.on("click",function(a){a.preventDefault();var e=t(this).index();t(".flexslider").flexslider(e),i.galleryMetaData(),l.toggleClass("hide"),t(".lightbox-actions").toggleClass("hide")}),s.on("click",function(i){i.preventDefault(),l.toggleClass("hide"),t(".lightbox-actions").toggleClass("hide")})}},aspectRatio:function(){i.vars.imageRatio.each(function(){var i=t(this),a=parseInt(i.attr("height")),e=parseInt(i.attr("width"));i.addClass(a>e?"portrait":"landscape")});var a=i.vars.image.width();i.vars.image.css({height:a+"px"})},galleryMetaData:function(){var i=t(".flexslider"),a=i.data("flexslider"),e=t(".flex-active-slide img"),l=e.attr("alt"),o=t("span.count"),s=t("span.title"),n=a.currentSlide+1;o.html(n),s.html(l)},modal:{vars:{},init:function(){this.position()},position:function(){parentWidth=t(".slides").width(),parentHeight=t(".slides").height(),elementWidth=t(".modal").width(),elementHeight=t(".modal").height(),t(".modal").css("left",parentWidth/2-elementWidth/2),t(".modal").css("top",parentHeight/2-elementHeight/2)},message:function(i){var a=t(".modal"),e=t(".modal .message");"success"===i?(e.removeClass("fail"),e.addClass("success").html("Image successfully added to lightbox."),a.toggleClass("visible")):(e.removeClass("success"),e.addClass("fail").html("Image already exists in the lightbox."),a.toggleClass("visible"))}},colorToggle:function(){t(".color-toggle").on("click",function(){t("#main").toggleClass("black")})},lightbox:{vars:{},init:function(){this.vars.array=[],this.setCookie(),this.triggers();var a=t("#field_1_2 input").val();t("#field_1_2 input").val(a+"?id="+i.lightbox.vars.array)},setCookie:function(){if("undefined"==typeof t.cookie("lightbox"))t.cookie("lightbox","0",{expires:7});else{i.lightbox.vars.array=t.cookie("lightbox").split(",");for(var a=0;a<i.lightbox.vars.array.length;a++)i.lightbox.vars.array[a]=parseInt(i.lightbox.vars.array[a])}},triggers:function(){var a=t(".lightbox-btn"),e=t(".lightbox-remove"),l=t(".clear-selection");a.on("click",function(a){a.preventDefault();var e=t(this).data("id");i.lightbox.addToArray(e)}),e.on("click",function(a){a.preventDefault();var e=t(this).data("id");i.lightbox.removeFromArray(e)}),l.on("click",function(t){t.preventDefault(),i.lightbox.clearArray()})},addToArray:function(a){var e=i.lightbox.vars.array;if(-1==e.indexOf(a)){e.push(a);var l=e.toString();t.cookie("lightbox",l),i.modal.message("success"),i.lightbox.basket()}else i.modal.message("fail")},removeFromArray:function(a){var e=i.lightbox.vars.array,l=e.indexOf(a);if(-1!==l){e.splice(l,1);var o=e.toString();t.cookie("lightbox",o),location.reload()}i.lightbox.basket()},basket:function(){var a=i.lightbox.vars.array.length-1;a>0&&(t("span.counter").html(a),t("span.counter").addClass("bounce"))},clearArray:function(){t.removeCookie("lightbox"),location.reload()}}};i.init(),t(window).load(function(){var a=new Blazy({container:".gallery"});t(".flexslider").flexslider({animation:"fade",animationSpeed:850,controlNav:!1,slideshow:!1,after:function(){i.galleryMetaData()}}),t(".splash").delay(1e3).fadeOut(1e3)})}(jQuery);