!function(t){var e={vars:{},init:function(){this.frontPage.init(),this.flexslider.init(),this.aspectRatio(),this.modal.lightbox(),this.colorToggle(),this.lightbox.init(),this.lightbox.basket(),Modernizr.addTest("firefox",function(){return!!navigator.userAgent.match(/firefox/i)});var a=t("#overlaymenu"),i=t(".menu-button"),l=t("#weezy");i.on("click",function(t){t.preventDefault(),l.toggleClass("no-scroll"),a.toggleClass("visible")});var s=new Blazy({selector:".lazy",container:".gallery, #gallery-content, .album-items"});t(window).resize(function(){e.aspectRatio()})},frontPage:{vars:{},init:function(){var a=e.vars.home=t("#home, #home2");return a.length?(this.vars.links=t(".category-links a"),this.vars.album=t(".album"),this.vars.item=t(".album-items .item"),void this.triggers()):!1},triggers:function(){t("html").hasClass("no-touch")?e.frontPage.vars.album.on("hover",function(){t(this).toggleClass("active")}):t(".album").addClass("active"),e.frontPage.vars.links.mouseover(function(){var e=t(this).parent().data("bg");t(this).closest(".album").find('.bg[data-bg="'+e+'"]').toggleClass("visible")}).mouseout(function(){var e=t(this).parent().data("bg");t(this).closest(".album").find('.bg[data-bg="'+e+'"]').toggleClass("visible")})}},hash:{query:function(){var a=t(".gallery li").filter("[data-id="+e.hash.get()+"]").index();return-1!==a?a:void 0},get:function(){return window.location.hash.substring(1)},set:function(){var e=t(".flex-active-slide").data("id");"#"!==e&&(window.location.hash=e)}},flexslider:{vars:{},init:function(){var a=e.vars.lightbox=t("#slider");if(!a.length)return!1;this.vars.content=t("#gallery-content"),this.vars.image=t(".gallery .column"),this.vars.toggle=t(".toggle-gallery"),this.triggers();var i=e.flexslider.vars.slider=t("#slider");i.flexslider({animation:"slide",animationSpeed:1e3,controlNav:!1,slideshow:!1,startAt:e.hash.query(),start:function(){t(window).trigger("resize"),e.galleryMetaData()},after:function(){e.hash.set(),e.galleryMetaData()}})},triggers:function(){e.flexslider.vars.image.on("click",function(a){a.preventDefault();var i=t(this),l=t(".gallery li").filter("[data-id="+i.data("id")+"]").index(),s=t("#slider"),o=s.data("flexslider"),r=o.vars.animationSpeed;o.vars.animationSpeed=0,o.flexAnimate(l),o.vars.animationSpeed=r,e.galleryMetaData(),e.flexslider.vars.content.toggleClass("hide"),t(window).trigger("resize"),t("#slider").toggleClass("visible")}),e.flexslider.vars.toggle.on("click",function(a){a.preventDefault(),e.flexslider.vars.content.toggleClass("hide"),t("#slider").toggleClass("visible"),t(".lightbox-actions").toggleClass("hide")})}},aspectRatio:function(){e.vars.imageRatio=t(".gallery .column"),e.vars.image=t(".gallery .column"),e.vars.imageRatio.each(function(){var e=t(this).find("img"),a=parseInt(e.attr("height")),i=parseInt(e.attr("width"));t(this).addClass(a>i?"portrait":i>a?"landscape":"square")});var a=e.vars.image.outerWidth();e.vars.image.css({height:a+"px"})},galleryMetaData:function(){var e=t(".flex-active-slide img"),a=e.attr("alt"),i=t("span.count"),l=t("span.title"),s=t("#slider"),o=s.data("flexslider").currentSlide;i.html(o+1),l.html(a),activeID=t(".flex-active-slide").data("id"),t("button.add").attr("data-id",activeID),t("button.remove").attr("data-id",activeID)},modal:{lightbox:function(){t(".lightbox-toggle").on("click",function(){t(".lightbox-form-wrapper").toggleClass("visible")})},message:function(a){var i=t(".modal"),l=t(".modal .message");"success"===a?(l.removeClass("fail"),l.addClass("success").html("Image successfully added to lightbox."),i.toggleClass("visible"),e.modal.timeout()):(l.removeClass("success"),l.addClass("fail").html("Image already exists in the lightbox."),i.toggleClass("visible"),e.modal.timeout())},timeout:function(){clearTimeout(a);var e=t(".modal"),a=setTimeout(function(){e.toggleClass("visible")},3e3)}},colorToggle:function(){t(".color-toggle").on("click",function(){t("#weezy").toggleClass("black")})},lightbox:{vars:{},init:function(){this.vars.array=[],this.setCookie(),this.triggers(),t(".lightbox-cart").append("<span class='counter'></span>");var a=t("#field_1_2 input").val();t("#field_1_2 input").val(a+"?id="+e.lightbox.vars.array)},setCookie:function(){"undefined"==typeof t.cookie("lightbox")?t.cookie("lightbox","0",{expires:7}):e.lightbox.vars.array=t.cookie("lightbox").split(",")},triggers:function(){var a=t(".lightbox-add"),i=t(".add"),l=t(".remove"),s=t(".lightbox-remove"),o=t(".lightbox-clear"),r=t(".slides li");a.on("click",function(a){a.preventDefault();var i=t(this).attr("data-id");e.lightbox.addToArray(i)}),i.on("click",function(a){a.preventDefault();var i=t(this).attr("data-id");e.lightbox.addToArray(i)}),s.on("click",function(a){a.preventDefault();var i=t(this).attr("data-id");e.lightbox.removeFromArray(i)}),l.on("click",function(a){a.preventDefault();var i=t(this).attr("data-id");e.lightbox.removeFromArray(i)}),o.on("click",function(t){t.preventDefault(),e.lightbox.clearArray()}),r.on("hover",function(){t(this).children(".lightbox-btn, .lightbox-remove").toggleClass("visible")})},addToArray:function(a){var i=e.lightbox.vars.array;-1==t.inArray(a,i)?(i.push(a),t.cookie("lightbox",i),e.modal.message("success"),e.lightbox.basket()):e.modal.message("fail")},removeFromArray:function(a){var i=e.lightbox.vars.array,l=t.inArray(a,i);-1!==l&&(i.splice(l,1),t.cookie("lightbox",i),location.reload()),e.lightbox.basket()},basket:function(){var a=e.lightbox.vars.array.length-1;a>0&&(t(".counter").html(a),t(".counter").addClass("bounce"))},clearArray:function(){t.removeCookie("lightbox"),location.reload()}}};e.init(),t(window).load(function(){t("#single-albums")&&e.hash.query()&&(t("#gallery-content").toggleClass("hide"),t(".lightbox-actions").toggleClass("hide"),t("#slider").toggleClass("visible")),null==t.cookie("hasSeenAnimation")?(t(".splash").addClass("visible"),setTimeout(function(){t(".splash").removeClass("visible"),t(".fadeIn").addClass("invisible")},2e3),t.cookie("hasSeenAnimation","true")):setTimeout(function(){t(".fadeIn").addClass("invisible")},1e3),t(".category-links .bg").each(function(){t("<img/>",{src:t(this).data("bg"),"class":"precachedImg",style:"display:none;"}).appendTo("body")}),t(".precachedImg").load(function(){t(this).remove()})})}(jQuery);