!function($){var e={vars:{},init:function(){this.frontPage.init(),this.flexslider.init(),this.aspectRatio(),this.modal.lightbox(),this.colorToggle(),this.lightbox.init(),this.lightbox.basket(),Modernizr.addTest("firefox",function(){return!!navigator.userAgent.match(/firefox/i)});var a=$("#overlaymenu"),t=$(".menu-button"),i=$("#weezy");t.on("click",function(e){e.preventDefault(),i.toggleClass("no-scroll"),a.toggleClass("visible")});var s=new Blazy({selector:".lazy",container:".gallery, #gallery-content, .album-items"});$(window).resize(function(){e.aspectRatio()})},frontPage:{vars:{},init:function(){var a=e.vars.home=$("#home, #home2");return a.length?(this.vars.links=$(".category-links a"),this.vars.album=$(".album"),this.vars.item=$(".album-items .item"),void this.triggers()):!1},triggers:function(){$("html").hasClass("no-touch")?e.frontPage.vars.album.on("hover",function(){$(this).toggleClass("active")}):$(".album").addClass("active"),e.frontPage.vars.links.mouseover(function(){var e=$(this).parent().data("bg");$(this).closest(".album").find('.bg[data-bg="'+e+'"]').toggleClass("visible")}).mouseout(function(){var e=$(this).parent().data("bg");$(this).closest(".album").find('.bg[data-bg="'+e+'"]').toggleClass("visible")})}},hash:{query:function(){var a=$(".gallery li").filter("[data-id="+e.hash.get()+"]").index();return-1!==a?a:void 0},get:function(){return window.location.hash.substring(1)},set:function(){var e=$(".flex-active-slide").data("id");"#"!==e&&(window.location.hash=e)}},flexslider:{vars:{},init:function(){var a=e.vars.lightbox=$("#slider");if(!a.length)return!1;this.vars.content=$("#gallery-content"),this.vars.image=$(".gallery .column"),this.vars.toggle=$(".toggle-gallery"),this.triggers();var t=e.flexslider.vars.slider=$("#slider");t.flexslider({animation:"slide",animationSpeed:1e3,controlNav:!1,slideshow:!1,startAt:e.hash.query(),start:function(){$(window).trigger("resize"),e.galleryMetaData()},before:function(){$(".modal").removeClass("visible"),$(".desc-overlay").removeClass("visible")},after:function(){e.hash.set(),e.galleryMetaData()}})},triggers:function(){e.flexslider.vars.image.on("click",function(a){a.preventDefault(),$("body").hasClass("postid-13")&&(console.log("true"),$("#weezy").removeClass("white").addClass("black"));var t=$(this),i=$(".gallery li").filter("[data-id="+t.data("id")+"]").index(),s=$("#slider"),l=s.data("flexslider"),o=l.vars.animationSpeed;l.vars.animationSpeed=0,l.flexAnimate(i),l.vars.animationSpeed=o,e.galleryMetaData(),e.flexslider.vars.content.toggleClass("hide"),$(window).trigger("resize"),$("#slider").toggleClass("visible")}),e.flexslider.vars.toggle.on("click",function(a){a.preventDefault(),e.flexslider.vars.content.toggleClass("hide"),$("#slider").toggleClass("visible"),$(".lightbox-actions").toggleClass("hide")})}},aspectRatio:function(){e.vars.imageRatio=$(".gallery .column"),e.vars.image=$(".gallery .column"),e.vars.imageRatio.each(function(){var e=$(this).find("img"),a=parseInt(e.attr("height")),t=parseInt(e.attr("width"));$(this).addClass(a>t?"portrait":t>a?"landscape":"square")});var a=e.vars.image.outerWidth();e.vars.image.css({height:a+"px"})},galleryMetaData:function(){var e=$(".flex-active-slide img"),a=e.attr("alt"),t=$("span.count"),i=$("span.title"),s=$("#slider"),l=s.data("flexslider").currentSlide;t.html(l+1),i.html(a),activeID=$(".flex-active-slide").data("id"),$("button.add").attr("data-id",activeID),$("button.remove").attr("data-id",activeID)},modal:{lightbox:function(){$(".lightbox-toggle").on("click",function(){$(".lightbox-form-wrapper").toggleClass("visible")})},message:function(a){var t=$(".modal"),i=$(".modal .message");"success"===a?(i.removeClass("fail"),i.addClass("success").html("Image successfully added to lightbox."),t.addClass("visible"),e.modal.timeout()):(i.removeClass("success"),i.addClass("fail").html("Image already exists in the lightbox."),t.addClass("visible"),e.modal.timeout())},timeout:function(){clearTimeout(a);var e=$(".modal"),a=setTimeout(function(){e.removeClass("visible")},3e3)}},colorToggle:function(){var e=$("#weezy"),a=$("body");$(".color-toggle").on("click",function(){e.hasClass("white")?e.removeClass("white").addClass("black"):e.removeClass("black").addClass("white")})},lightbox:{vars:{},init:function(){this.vars.array=[],this.setCookie(),this.triggers(),$(".lightbox-cart").append("<span class='counter'></span>");var a=$("#field_1_2 input").val();$("#field_1_2 input").val(a+"?id="+e.lightbox.vars.array)},setCookie:function(){"undefined"==typeof $.cookie("lightbox")?$.cookie("lightbox","0",{expires:7}):e.lightbox.vars.array=$.cookie("lightbox").split(",")},triggers:function(){var a=$(".lightbox-add"),t=$(".add"),i=$(".remove"),s=$(".lightbox-remove"),l=$(".lightbox-clear"),o=$(".info"),r=$(".slides li");a.on("click",function(a){a.preventDefault();var t=$(this).attr("data-id");e.lightbox.addToArray(t)}),t.on("click",function(a){a.preventDefault();var t=$(this).attr("data-id");e.lightbox.addToArray(t)}),s.on("click",function(a){a.preventDefault();var t=$(this).attr("data-id");e.lightbox.removeFromArray(t)}),i.on("click",function(a){a.preventDefault();var t=$(this).attr("data-id");e.lightbox.removeFromArray(t)}),l.on("click",function(a){a.preventDefault(),e.lightbox.clearArray()}),o.on("click",function(e){e.preventDefault(),$(this).toggleClass("active"),$(".desc-overlay").toggleClass("visible")}),$(".desc-overlay button").on("click",function(){$(".desc-overlay").toggleClass("visible")}),r.on("hover",function(){$(this).children(".lightbox-btn, .lightbox-remove").toggleClass("visible")})},addToArray:function(a){var t=e.lightbox.vars.array;-1==$.inArray(a,t)?(t.push(a),$.cookie("lightbox",t),e.modal.message("success"),e.lightbox.basket()):e.modal.message("fail")},removeFromArray:function(a){var t=e.lightbox.vars.array,i=$.inArray(a,t);-1!==i&&(t.splice(i,1),$.cookie("lightbox",t),location.reload()),e.lightbox.basket()},basket:function(){var a=e.lightbox.vars.array.length-1;a>0&&($(".counter").html(a),$(".counter").addClass("bounce"))},clearArray:function(){$.removeCookie("lightbox"),location.reload()}}};e.init(),$(window).load(function(){$(".js-loader").fadeOut("slow",function(){$(this).remove()}),$(".equal-height").matchHeight(),$("#single-albums")&&e.hash.query()&&($("#gallery-content").toggleClass("hide"),$(".lightbox-actions").toggleClass("hide"),$("#slider").toggleClass("visible")),null==$.cookie("hasSeenAnimation")?($(".splash").addClass("visible"),setTimeout(function(){$(".splash").removeClass("visible"),$(".fadeIn").addClass("invisible")},2e3),$.cookie("hasSeenAnimation","true")):setTimeout(function(){$(".fadeIn").addClass("invisible")},1e3),$(".category-links .bg").each(function(){$("<img/>",{src:$(this).data("bg"),"class":"precachedImg",style:"display:none;"}).appendTo("body")}),$(".precachedImg").load(function(){$(this).remove()})})}(jQuery);